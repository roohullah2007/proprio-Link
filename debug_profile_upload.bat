@echo off
echo ==========================================\necho PROFILE UPLOAD DEBUG SCRIPT\necho ==========================================\necho.\n\necho This script will help debug the profile upload issue.\necho.\n\necho Step 1: Clear all caches...\nphp artisan config:clear\nphp artisan route:clear\nphp artisan view:clear\necho ‚úì Caches cleared\n\necho.\necho Step 2: Build frontend with debugging...\nnpm run build\necho ‚úì Frontend built\n\necho.\necho Step 3: Check Laravel logs...\nif exist \"storage\\logs\\laravel.log\" (\n    echo Recent Laravel log entries:\n    powershell \"Get-Content 'storage\\logs\\laravel.log' -Tail 20\"\n) else (\n    echo No Laravel log found\n)\n\necho.\necho Step 4: Test profile route...\necho Testing if profile route is accessible...\nphp artisan route:list | findstr \"profile.update\"\n\necho.\necho Step 5: Check storage permissions...\nif exist \"storage\\app\\public\\profile-images\" (\n    echo ‚úì Profile images directory exists\n    dir \"storage\\app\\public\\profile-images\"\n) else (\n    echo ‚úó Profile images directory missing\n    mkdir \"storage\\app\\public\\profile-images\"\n    echo ‚úì Created profile images directory\n)\n\necho.\necho ==========================================\necho DEBUG INSTRUCTIONS:\necho ==========================================\necho.\necho 1. Try uploading a profile image now\necho 2. Check browser console for errors (F12)\necho 3. Look for these log messages:\necho    - \"üöÄ Profile update request started...\"\necho    - \"‚úÖ Profile updated successfully!\" OR \"‚ùå Profile update failed:\"\necho 4. If errors occur, check the detailed console output\necho 5. The enhanced logging will show exactly what's being sent\necho.\necho Common issues to check:\necho - File size (must be under 2MB)\necho - File type (JPG, PNG, GIF only)\necho - Required fields (First Name, Last Name, Email)\necho - Browser JavaScript errors\necho.\npause\n