import{g as Fe,R as l,r as q,j as t,$ as se,m as Re}from"./app-CV-uduzR.js";import{A as oe}from"./AuthenticatedLayout-5m2CGkcX.js";import{u as xe}from"./translations-ByLVRw2M.js";import"./ApplicationLogo-DtnQNlSQ.js";import"./Dropdown-CBZVXiBJ.js";import"./transition-CRZGpZtR.js";import"./LanguageSwitcher-CB5q9_EP.js";var ve="basil",Oe=function(e){return e===3?"v3":e},ge="https://js.stripe.com",Le="".concat(ge,"/").concat(ve,"/stripe.js"),Te=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,_e=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var Be=function(e){return Te.test(e)||_e.test(e)},Me=function(){for(var e=document.querySelectorAll('script[src^="'.concat(ge,'"]')),n=0;n<e.length;n++){var o=e[n];if(Be(o.src))return o}return null},ae=function(e){var n="",o=document.createElement("script");o.src="".concat(Le).concat(n);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(o),o},Ie=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.3.1",startTime:n})},T=null,W=null,U=null,We=function(e){return function(n){e(new Error("Failed to load Stripe.js",{cause:n}))}},Ue=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},qe=function(e){return T!==null?T:(T=new Promise(function(n,o){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe){n(window.Stripe);return}try{var s=Me();if(!(s&&e)){if(!s)s=ae(e);else if(s&&U!==null&&W!==null){var a;s.removeEventListener("load",U),s.removeEventListener("error",W),(a=s.parentNode)===null||a===void 0||a.removeChild(s),s=ae(e)}}U=Ue(n,o),W=We(o),s.addEventListener("load",U),s.addEventListener("error",W)}catch(c){o(c);return}}),T.catch(function(n){return T=null,Promise.reject(n)}))},ze=function(e,n,o){if(e===null)return null;var s=n[0],a=s.match(/^pk_test/),c=Oe(e.version),m=ve;a&&c!==m&&console.warn("Stripe.js@".concat(c," was loaded on the page, but @stripe/stripe-js@").concat("7.3.1"," expected Stripe.js@").concat(m,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var i=e.apply(void 0,n);return Ie(i,o),i},_,ye=!1,je=function(){return _||(_=qe(null).catch(function(e){return _=null,Promise.reject(e)}),_)};Promise.resolve().then(function(){return je()}).catch(function(r){ye||console.warn(r)});var De=function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];ye=!0;var s=Date.now();return je().then(function(a){return ze(a,n,s)})},G={exports:{}},X,ie;function $e(){if(ie)return X;ie=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return X=r,X}var K,ce;function Ve(){if(ce)return K;ce=1;var r=$e();function e(){}function n(){}return n.resetWarningCache=e,K=function(){function o(c,m,i,g,x,y){if(y!==r){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}o.isRequired=o;function s(){return o}var a={array:o,bigint:o,bool:o,func:o,number:o,object:o,string:o,symbol:o,any:o,arrayOf:s,element:o,elementType:o,instanceOf:s,node:o,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:e};return a.PropTypes=a,a},K}var le;function He(){return le||(le=1,G.exports=Ve()()),G.exports}var Je=He();const u=Fe(Je);function de(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);e&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,o)}return n}function ue(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?de(Object(n),!0).forEach(function(o){be(r,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach(function(o){Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(n,o))})}return r}function z(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?z=function(e){return typeof e}:z=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(r)}function be(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Ye(r,e){if(r==null)return{};var n={},o=Object.keys(r),s,a;for(a=0;a<o.length;a++)s=o[a],!(e.indexOf(s)>=0)&&(n[s]=r[s]);return n}function Ge(r,e){if(r==null)return{};var n=Ye(r,e),o,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(s=0;s<a.length;s++)o=a[s],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(r,o)&&(n[o]=r[o])}return n}function Ee(r,e){return Xe(r)||Ke(r,e)||Qe(r,e)||Ze()}function Xe(r){if(Array.isArray(r))return r}function Ke(r,e){var n=r&&(typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"]);if(n!=null){var o=[],s=!0,a=!1,c,m;try{for(n=n.call(r);!(s=(c=n.next()).done)&&(o.push(c.value),!(e&&o.length===e));s=!0);}catch(i){a=!0,m=i}finally{try{!s&&n.return!=null&&n.return()}finally{if(a)throw m}}return o}}function Qe(r,e){if(r){if(typeof r=="string")return me(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return me(r,e)}}function me(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=r[n];return o}function Ze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var E=function(e,n,o){var s=!!o,a=l.useRef(o);l.useEffect(function(){a.current=o},[o]),l.useEffect(function(){if(!s||!e)return function(){};var c=function(){a.current&&a.current.apply(a,arguments)};return e.on(n,c),function(){e.off(n,c)}},[s,n,e,a])},Q=function(e){var n=l.useRef(e);return l.useEffect(function(){n.current=e},[e]),n.current},L=function(e){return e!==null&&z(e)==="object"},et=function(e){return L(e)&&typeof e.then=="function"},tt=function(e){return L(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},pe="[object Object]",rt=function r(e,n){if(!L(e)||!L(n))return e===n;var o=Array.isArray(e),s=Array.isArray(n);if(o!==s)return!1;var a=Object.prototype.toString.call(e)===pe,c=Object.prototype.toString.call(n)===pe;if(a!==c)return!1;if(!a&&!o)return e===n;var m=Object.keys(e),i=Object.keys(n);if(m.length!==i.length)return!1;for(var g={},x=0;x<m.length;x+=1)g[m[x]]=!0;for(var y=0;y<i.length;y+=1)g[i[y]]=!0;var d=Object.keys(g);if(d.length!==m.length)return!1;var C=e,S=n,p=function(k){return r(C[k],S[k])};return d.every(p)},Ce=function(e,n,o){return L(e)?Object.keys(e).reduce(function(s,a){var c=!L(n)||!rt(e[a],n[a]);return o.includes(a)?(c&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),s):c?ue(ue({},s||{}),{},be({},a,e[a])):s},null):null},Se="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",fe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Se;if(e===null||tt(e))return e;throw new Error(n)},nt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Se;if(et(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(s){return fe(s,n)})};var o=fe(e,n);return o===null?{tag:"empty"}:{tag:"sync",stripe:o}},st=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"3.7.0"}),e.registerAppInfo({name:"react-stripe-js",version:"3.7.0",url:"https://stripe.com/docs/stripe-js/react"}))},D=l.createContext(null);D.displayName="ElementsContext";var we=function(e,n){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return e},Ne=function(e){var n=e.stripe,o=e.options,s=e.children,a=l.useMemo(function(){return nt(n)},[n]),c=l.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,elements:a.tag==="sync"?a.stripe.elements(o):null}}),m=Ee(c,2),i=m[0],g=m[1];l.useEffect(function(){var d=!0,C=function(p){g(function(A){return A.stripe?A:{stripe:p,elements:p.elements(o)}})};return a.tag==="async"&&!i.stripe?a.stripePromise.then(function(S){S&&d&&C(S)}):a.tag==="sync"&&!i.stripe&&C(a.stripe),function(){d=!1}},[a,i,o]);var x=Q(n);l.useEffect(function(){x!==null&&x!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[x,n]);var y=Q(o);return l.useEffect(function(){if(i.elements){var d=Ce(o,y,["clientSecret","fonts"]);d&&i.elements.update(d)}},[o,y,i.elements]),l.useEffect(function(){st(i.stripe)},[i.stripe]),l.createElement(D.Provider,{value:i},s)};Ne.propTypes={stripe:u.any,options:u.object};var ot=function(e){var n=l.useContext(D);return we(n,e)},at=function(){var e=ot("calls useElements()"),n=e.elements;return n};u.func.isRequired;var ke=l.createContext(null);ke.displayName="CheckoutSdkContext";var it=function(e,n){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(n," in an <CheckoutProvider> provider."));return e},ct=l.createContext(null);ct.displayName="CheckoutContext";u.any,u.shape({fetchClientSecret:u.func.isRequired,elementsOptions:u.object}).isRequired;var Z=function(e){var n=l.useContext(ke),o=l.useContext(D);if(n&&o)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return n?it(n,e):we(o,e)},lt=["mode"],dt=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},f=function(e,n){var o="".concat(dt(e),"Element"),s=function(i){var g=i.id,x=i.className,y=i.options,d=y===void 0?{}:y,C=i.onBlur,S=i.onFocus,p=i.onReady,A=i.onChange,k=i.onEscape,F=i.onClick,B=i.onLoadError,M=i.onLoaderStart,$=i.onNetworksChange,V=i.onConfirm,I=i.onCancel,H=i.onShippingAddressChange,w=i.onShippingRateChange,R=Z("mounts <".concat(o,">")),O="elements"in R?R.elements:null,N="checkoutSdk"in R?R.checkoutSdk:null,Ae=l.useState(null),ee=Ee(Ae,2),b=ee[0],Pe=ee[1],P=l.useRef(null),J=l.useRef(null);E(b,"blur",C),E(b,"focus",S),E(b,"escape",k),E(b,"click",F),E(b,"loaderror",B),E(b,"loaderstart",M),E(b,"networkschange",$),E(b,"confirm",V),E(b,"cancel",I),E(b,"shippingaddresschange",H),E(b,"shippingratechange",w),E(b,"change",A);var Y;p&&(e==="expressCheckout"?Y=p:Y=function(){p(b)}),E(b,"ready",Y),l.useLayoutEffect(function(){if(P.current===null&&J.current!==null&&(O||N)){var j=null;if(N)switch(e){case"payment":j=N.createPaymentElement(d);break;case"address":if("mode"in d){var re=d.mode,ne=Ge(d,lt);if(re==="shipping")j=N.createShippingAddressElement(ne);else if(re==="billing")j=N.createBillingAddressElement(ne);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":j=N.createExpressCheckoutElement(d);break;case"currencySelector":j=N.createCurrencySelectorElement();break;default:throw new Error("Invalid Element type ".concat(o,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else O&&(j=O.create(e,d));P.current=j,Pe(j),j&&j.mount(J.current)}},[O,N,d]);var te=Q(d);return l.useEffect(function(){if(P.current){var j=Ce(d,te,["paymentRequest"]);j&&"update"in P.current&&P.current.update(j)}},[d,te]),l.useLayoutEffect(function(){return function(){if(P.current&&typeof P.current.destroy=="function")try{P.current.destroy(),P.current=null}catch{}}},[]),l.createElement("div",{id:g,className:x,ref:J})},a=function(i){Z("mounts <".concat(o,">"));var g=i.id,x=i.className;return l.createElement("div",{id:g,className:x})},c=n?a:s;return c.propTypes={id:u.string,className:u.string,onChange:u.func,onBlur:u.func,onFocus:u.func,onReady:u.func,onEscape:u.func,onClick:u.func,onLoadError:u.func,onLoaderStart:u.func,onNetworksChange:u.func,onConfirm:u.func,onCancel:u.func,onShippingAddressChange:u.func,onShippingRateChange:u.func,options:u.object},c.displayName=o,c.__elementType=e,c},h=typeof window>"u",ut=l.createContext(null);ut.displayName="EmbeddedCheckoutProviderContext";var mt=function(){var e=Z("calls useStripe()"),n=e.stripe;return n};f("auBankAccount",h);var he=f("card",h);f("cardNumber",h);f("cardExpiry",h);f("cardCvc",h);f("fpxBank",h);f("iban",h);f("idealBank",h);f("p24Bank",h);f("epsBank",h);f("payment",h);f("expressCheckout",h);f("currencySelector",h);f("paymentRequestButton",h);f("linkAuthentication",h);f("address",h);f("shippingAddress",h);f("paymentMethodMessaging",h);f("affirmMessage",h);f("afterpayClearpayMessage",h);const v={CreditCard:({className:r})=>t.jsx("svg",{className:r,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),CheckCircle:({className:r})=>t.jsx("svg",{className:r,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),Home:({className:r})=>t.jsx("svg",{className:r,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),MapPin:({className:r})=>t.jsxs("svg",{className:r,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),Maximize2:({className:r})=>t.jsx("svg",{className:r,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 3h6v6m-6 0L9 15M9 3H3v6m6 0l6-6"})}),User:({className:r})=>t.jsx("svg",{className:r,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),Phone:({className:r})=>t.jsx("svg",{className:r,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),Mail:({className:r})=>t.jsx("svg",{className:r,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),Shield:({className:r})=>t.jsx("svg",{className:r,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.031 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),Euro:({className:r})=>t.jsx("svg",{className:r,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),ArrowLeft:({className:r})=>t.jsx("svg",{className:r,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})},pt=({property:r,price:e,currency:n,onSuccess:o,onError:s})=>{const{__:a}=xe(),c=mt(),m=at(),[i,g]=q.useState(!1),x=async C=>{var p,A;if(C.preventDefault(),!c||!m){s(a("Stripe is not loaded yet. Please try again."));return}const S=m.getElement(he);if(!S){s(a("Card element not found"));return}g(!0);try{const k=document.querySelector('meta[name="csrf-token"]');if(!k)throw new Error(a("Session expired. Please refresh the page and try again."));const F=await fetch(`/payment/properties/${r.id}/create-intent`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":k.content}});if(F.status===419)throw new Error(a("Session expired. Please refresh the page and try again."));const B=F.headers.get("content-type");if(!B||!B.includes("application/json")){const w=await F.text();throw console.error("Server returned HTML instead of JSON:",w.substring(0,500)),w.includes("Page expirée")||w.includes("expired")||F.status===419?new Error(a("Session expired. Please refresh the page and try again.")):new Error(a("Server error occurred. Please try again or contact support."))}const M=await F.json();if(!F.ok)throw new Error(M.error||a("Error creating payment"));const{client_secret:$,payment_intent_id:V}=M,{error:I,paymentIntent:H}=await c.confirmCardPayment($,{payment_method:{card:S,billing_details:{name:`${((p=r.proprietaire)==null?void 0:p.prenom)||""} ${((A=r.proprietaire)==null?void 0:A.nom)||""}`}}});if(I){s(I.message);return}if(H.status==="succeeded"){const w=await fetch("/payment/confirm",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":k.content},body:JSON.stringify({payment_intent_id:V,property_id:r.id})});if(w.status===419)throw new Error(a("Session expired. Please refresh the page and try again."));const R=w.headers.get("content-type");if(!R||!R.includes("application/json")){const N=await w.text();throw console.error("Server returned HTML instead of JSON:",N.substring(0,500)),N.includes("Page expirée")||N.includes("expired")||w.status===419?new Error(a("Session expired. Please refresh the page and try again.")):new Error(a("Server error occurred. Please try again or contact support."))}const O=await w.json();if(!w.ok)throw new Error(O.error||a("Error confirming payment"));o(O)}}catch(k){s(k.message)}finally{g(!1)}},y=C=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:n.toUpperCase(),maximumFractionDigits:2}).format(C),d={style:{base:{fontSize:"14px",color:"#555555","::placeholder":{color:"#aab7c4"},fontFamily:"Inter, system-ui, sans-serif"},invalid:{color:"#dc2626"}},hidePostalCode:!1};return t.jsxs("form",{onSubmit:x,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-[#000] font-inter mb-3",children:a("Card Information")}),t.jsx("div",{className:"p-4 border border-[#EAEAEA] rounded-lg bg-white focus-within:border-[#1E40AF] transition-colors",children:t.jsx(he,{options:d})}),t.jsxs("p",{className:"text-xs text-[#6C6C6C] font-inter mt-2 flex items-center",children:[t.jsx(v.Shield,{className:"w-3 h-3 mr-1"}),a("Your payment information is secure and encrypted")]})]}),t.jsx("div",{className:"bg-[#F5F9FA] border border-[#EAEAEA] p-4 rounded-lg",children:t.jsxs("label",{className:"flex items-start space-x-3",children:[t.jsx("input",{type:"checkbox",required:!0,className:"mt-1 rounded border-[#EAEAEA] text-[#065033] focus:ring-[#065033] focus:border-[#065033]"}),t.jsx("span",{className:"text-sm text-[#000] font-inter leading-relaxed",children:a("I accept the terms of use and privacy policy")})]})}),t.jsx("button",{type:"submit",disabled:!c||i,className:`w-full flex justify-center items-center px-4 py-3 h-12 bg-[#1E40AF] border border-[#1E40AF] rounded-lg text-white font-inter font-medium text-sm transition-colors ${i?"opacity-50 cursor-not-allowed":"hover:bg-[#1E3A8A] focus:outline-none focus:bg-[#1E3A8A]"}`,children:i?t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-3"}),a("Processing...")]}):t.jsxs(t.Fragment,{children:[t.jsx(v.CreditCard,{className:"w-4 h-4 mr-2"}),a("Buy Contact for")," ",y(e)]})})]})};function bt({property:r,price:e,currency:n,stripePublishableKey:o}){const{__:s}=xe(),[a,c]=q.useState(null),[m,i]=q.useState(!1),g=q.useMemo(()=>o?De(o):null,[o]),x=p=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:n.toUpperCase(),maximumFractionDigits:2}).format(p),y=p=>({APPARTEMENT:s("Apartment"),MAISON:s("House"),TERRAIN:s("Land"),COMMERCIAL:s("Commercial"),BUREAU:s("Office"),AUTRES:s("Other")})[p]||p,d=p=>{i(!0),c(null),setTimeout(()=>{Re.visit(`/agent/purchases/${p.purchase_id}/contact`,{method:"get"})},2e3)},C=p=>{c(p),i(!1)},S=()=>{window.history.back()};return m?t.jsxs(oe,{usePillNavigation:!1,header:t.jsx("div",{className:"flex justify-between items-center px-0 gap-[9px] w-full h-[31px]",children:t.jsx("div",{className:"flex-none order-0 flex-grow-0",children:t.jsx("h1",{className:"font-inter font-medium text-[14px] leading-[19px] flex items-center text-[#000] capitalize",children:s("Payment Successful")})})}),children:[t.jsx(se,{title:s("Payment Successful")}),t.jsx("div",{className:"py-8",children:t.jsx("div",{className:"mx-auto max-w-2xl px-8",children:t.jsx("div",{className:"bg-white border border-[#EAEAEA] rounded-lg overflow-hidden",children:t.jsxs("div",{className:"p-8 text-center",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-6 bg-[#EBF4FF] border border-[#BFDBFE] rounded-full flex items-center justify-center",children:t.jsx(v.CheckCircle,{className:"w-8 h-8 text-[#1E40AF]"})}),t.jsx("h3",{className:"text-xl font-semibold text-[#000] font-inter mb-3",children:s("Payment confirmed successfully!")}),t.jsx("p",{className:"text-[#6C6C6C] font-inter mb-6",children:s("You will be redirected to the contact information...")}),t.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-[#1E40AF] border-t-transparent rounded-full mx-auto"})]})})})})]}):t.jsxs(oe,{usePillNavigation:!1,header:t.jsxs("div",{className:"flex justify-between items-center px-0 gap-[9px] w-full h-[31px]",children:[t.jsx("div",{className:"flex-none order-0 flex-grow-0",children:t.jsx("h1",{className:"font-inter font-medium text-[14px] leading-[19px] flex items-center text-[#000] capitalize",children:s("Buy Contact")})}),t.jsx("div",{className:"flex items-center gap-[14px] h-[31px] flex-none order-1 flex-grow-0",children:t.jsxs("button",{onClick:S,className:"flex justify-center items-center px-[10px] py-[6px] gap-[6px] h-[31px] bg-[#F5F9FA] border-[1.5px] border-[#EAEAEA] rounded-[20px] hover:bg-[#EAEAEA] transition-colors focus:outline-none",children:[t.jsx(v.ArrowLeft,{className:"w-4 h-4 text-[#000]"}),t.jsx("span",{className:"font-inter font-medium text-[12px] leading-[16px] text-[#000]",children:s("Back")})]})})]}),children:[t.jsx(se,{title:s("Buy Contact")}),t.jsx("div",{className:"py-8",children:t.jsx("div",{className:"mx-auto max-w-[1336px] px-8",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t.jsx("div",{className:"lg:col-span-2 space-y-6",children:t.jsx("div",{className:"bg-white border border-[#EAEAEA] rounded-lg overflow-hidden",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("h3",{className:"text-lg font-semibold text-[#000] font-inter mb-4 flex items-center",children:[t.jsx(v.Home,{className:"w-5 h-5 mr-2 text-[#1E40AF]"}),s("Property Details")]}),t.jsx("div",{className:"mb-6",children:r.images&&r.images.length>0?t.jsx("img",{src:`/storage/${r.images[0].chemin_fichier}`,alt:r.adresse_complete,className:"w-full h-64 object-cover rounded-lg border border-[#EAEAEA]"}):t.jsx("div",{className:"w-full h-64 bg-[#F5F9FA] border border-[#EAEAEA] rounded-lg flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx(v.Home,{className:"w-12 h-12 text-[#6C6C6C] mx-auto mb-2"}),t.jsx("p",{className:"text-[#6C6C6C] font-inter text-sm",children:s("No images available")})]})})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-[#EBF4FF] border border-[#EAEAEA] p-4 rounded-lg",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx(v.MapPin,{className:"w-4 h-4 text-[#6C6C6C] mr-2"}),t.jsx("span",{className:"text-sm font-medium text-[#000] font-inter",children:s("Location")})]}),t.jsxs("p",{className:"text-[#000] font-inter font-medium",children:[r.ville,", ",r.pays]}),t.jsx("p",{className:"text-[#6C6C6C] font-inter text-sm",children:s("Full address available after purchase")})]}),t.jsxs("div",{className:"bg-[#EBF4FF] border border-[#EAEAEA] p-4 rounded-lg",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx(v.Euro,{className:"w-4 h-4 text-[#6C6C6C] mr-2"}),t.jsx("span",{className:"text-sm font-medium text-[#000] font-inter",children:s("Price")})]}),t.jsx("p",{className:"text-xl font-bold text-[#1E40AF] font-inter",children:x(r.prix)})]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-[#EBF4FF] border border-[#EAEAEA] p-4 rounded-lg text-center",children:[t.jsxs("div",{className:"flex items-center justify-center mb-2",children:[t.jsx(v.Home,{className:"w-4 h-4 text-[#6C6C6C] mr-1"}),t.jsx("span",{className:"text-sm font-medium text-[#000] font-inter",children:s("Type")})]}),t.jsx("p",{className:"text-[#000] font-inter font-medium",children:y(r.type_propriete)})]}),t.jsxs("div",{className:"bg-[#EBF4FF] border border-[#EAEAEA] p-4 rounded-lg text-center",children:[t.jsxs("div",{className:"flex items-center justify-center mb-2",children:[t.jsx(v.Maximize2,{className:"w-4 h-4 text-[#6C6C6C] mr-1"}),t.jsx("span",{className:"text-sm font-medium text-[#000] font-inter",children:s("Surface")})]}),t.jsxs("p",{className:"text-[#000] font-inter font-medium",children:[r.superficie_m2," m²"]})]}),r.nombre_pieces&&t.jsxs("div",{className:"bg-[#EBF4FF] border border-[#EAEAEA] p-4 rounded-lg text-center",children:[t.jsxs("div",{className:"flex items-center justify-center mb-2",children:[t.jsx(v.User,{className:"w-4 h-4 text-[#6C6C6C] mr-1"}),t.jsx("span",{className:"text-sm font-medium text-[#000] font-inter",children:s("Rooms")})]}),t.jsx("p",{className:"text-[#000] font-inter font-medium",children:r.nombre_pieces})]})]})]})]})})}),t.jsx("div",{className:"lg:col-span-1",children:t.jsx("div",{className:"bg-white border border-[#EAEAEA] rounded-lg overflow-hidden sticky top-8",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("h3",{className:"text-lg font-semibold text-[#000] font-inter mb-4 flex items-center",children:[t.jsx(v.CreditCard,{className:"w-5 h-5 mr-2 text-[#1E40AF]"}),s("Payment Information")]}),t.jsxs("div",{className:"bg-[#EBF4FF] border border-[#EAEAEA] p-4 rounded-lg mb-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-3",children:[t.jsxs("span",{className:"text-[#000] font-inter font-medium",children:[s("Property Owner Contact"),":"]}),t.jsx("span",{className:"font-semibold text-[#000] font-inter",children:x(e)})]}),t.jsx("div",{className:"border-t border-[#EAEAEA] pt-3",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("span",{className:"text-[#000] font-inter font-semibold",children:[s("Total"),":"]}),t.jsx("span",{className:"text-lg font-bold text-[#1E40AF] font-inter",children:x(e)})]})})]}),t.jsxs("div",{className:"bg-[#EBF4FF] border border-[#BFDBFE] p-4 rounded-lg mb-6",children:[t.jsxs("h4",{className:"font-semibold text-[#1E40AF] font-inter mb-3 flex items-center",children:[t.jsx(v.CheckCircle,{className:"w-4 h-4 mr-2"}),s("What you will get"),":"]}),t.jsxs("ul",{className:"text-sm text-[#1E40AF] font-inter space-y-2",children:[t.jsxs("li",{className:"flex items-center",children:[t.jsx(v.User,{className:"w-3 h-3 mr-2 flex-shrink-0"}),s("Owner name and surname")]}),t.jsxs("li",{className:"flex items-center",children:[t.jsx(v.Phone,{className:"w-3 h-3 mr-2 flex-shrink-0"}),s("Phone number")]}),t.jsxs("li",{className:"flex items-center",children:[t.jsx(v.Mail,{className:"w-3 h-3 mr-2 flex-shrink-0"}),s("Email address")]}),t.jsxs("li",{className:"flex items-center",children:[t.jsx(v.CheckCircle,{className:"w-3 h-3 mr-2 flex-shrink-0"}),s("Instant access to information")]})]})]}),a&&t.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:t.jsx("p",{className:"text-sm text-red-600 font-inter",children:a})}),o?t.jsx(Ne,{stripe:g,children:t.jsx(pt,{property:r,price:e,currency:n,onSuccess:d,onError:C})}):t.jsx("div",{className:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:t.jsx("p",{className:"text-sm text-yellow-800 font-inter",children:s("Payment system not configured. Please contact support.")})}),t.jsxs("div",{className:"mt-4 text-xs text-[#6C6C6C] font-inter text-center space-y-1",children:[t.jsxs("p",{className:"flex items-center justify-center",children:[t.jsx(v.Shield,{className:"w-3 h-3 mr-1"}),s("Secure payment by Stripe")]}),t.jsx("p",{children:s("Your banking information is not stored on our servers")})]})]})})})]})})})]})}export{bt as default};
