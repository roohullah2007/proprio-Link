import{r as D,v as p,j as e,$ as A}from"./app-iFD7Weej.js";import{A as P}from"./AuthenticatedLayout-DWhC2xWj.js";import{u as M}from"./translations-rX8tNeDX.js";import"./ApplicationLogo-BMRKG7mZ.js";import"./Dropdown-CjFkiSaH.js";import"./transition-F1nsk1y3.js";import"./LanguageSwitcher-CvGVWDg5.js";function H({settings:a,lastTestResult:L}){M();const[m,c]=D.useState("smtp"),{data:l,setData:i,post:f,processing:x,errors:t}=p({smtp_host:a.smtp_host||"",smtp_port:a.smtp_port||"587",smtp_username:a.smtp_username||"",smtp_password:"",smtp_encryption:a.smtp_encryption||"tls",mail_from_address:a.mail_from_address||"",mail_from_name:a.mail_from_name||"",smtp_enabled:a.smtp_enabled??!0}),{data:o,setData:u,post:j,processing:b,errors:h}=p({admin_emails:a.admin_notification_emails||[""]}),{data:y,setData:_,post:g,processing:d}=p({test_email:""}),v=s=>{s.preventDefault(),f(route("admin.email-settings.update-smtp"))},N=s=>{s.preventDefault(),j(route("admin.email-settings.update-notification-emails"))},w=s=>{s.preventDefault(),g(route("admin.email-settings.test-email"))},k=()=>{g(route("admin.email-settings.test-admin-notification"),{preserveScroll:!0})},E=()=>{u("admin_emails",[...o.admin_emails,""])},S=s=>{const r=o.admin_emails.filter((n,T)=>T!==s);u("admin_emails",r.length>0?r:[""])},C=(s,r)=>{const n=[...o.admin_emails];n[s]=r,u("admin_emails",n)};return e.jsxs(P,{children:[e.jsx(A,{title:"Configuration Email - Admin"}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Configuration Email"}),e.jsx("p",{className:"text-gray-600",children:"Gérez les paramètres SMTP et les notifications administrateur"})]}),e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>c("smtp"),className:`whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm ${m==="smtp"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Paramètres SMTP"}),e.jsx("button",{onClick:()=>c("notifications"),className:`whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm ${m==="notifications"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Notifications Admin"}),e.jsx("button",{onClick:()=>c("test"),className:`whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm ${m==="test"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Tester la Configuration"})]})}),m==="smtp"&&e.jsx("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Configuration SMTP"}),e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"smtp_enabled",type:"checkbox",checked:l.smtp_enabled,onChange:s=>i("smtp_enabled",s.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"smtp_enabled",className:"ml-2 block text-sm text-gray-900",children:"Activer l'envoi d'emails"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Serveur SMTP"}),e.jsx("input",{type:"text",value:l.smtp_host,onChange:s=>i("smtp_host",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"smtp.exemple.com"}),t.smtp_host&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.smtp_host})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Port SMTP"}),e.jsx("input",{type:"number",value:l.smtp_port,onChange:s=>i("smtp_port",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"587"}),t.smtp_port&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.smtp_port})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nom d'utilisateur"}),e.jsx("input",{type:"text",value:l.smtp_username,onChange:s=>i("smtp_username",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"username@exemple.com"}),t.smtp_username&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.smtp_username})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),e.jsx("input",{type:"password",value:l.smtp_password,onChange:s=>i("smtp_password",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Laissez vide pour ne pas changer"}),t.smtp_password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.smtp_password})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Chiffrement"}),e.jsxs("select",{value:l.smtp_encryption,onChange:s=>i("smtp_encryption",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"tls",children:"TLS"}),e.jsx("option",{value:"ssl",children:"SSL"}),e.jsx("option",{value:"null",children:"Aucun"})]}),t.smtp_encryption&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.smtp_encryption})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Adresse d'expédition"}),e.jsx("input",{type:"email",value:l.mail_from_address,onChange:s=>i("mail_from_address",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"noreply@proprio-link.fr"}),t.mail_from_address&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.mail_from_address})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nom d'expédition"}),e.jsx("input",{type:"text",value:l.mail_from_name,onChange:s=>i("mail_from_name",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Proprio Link"}),t.mail_from_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.mail_from_name})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:x,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:x?"Enregistrement...":"Enregistrer les paramètres SMTP"})})]})]})}),m==="notifications"&&e.jsx("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Emails de notification administrateur"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Ces adresses recevront toutes les notifications administrateur (nouveaux utilisateurs, nouvelles propriétés, etc.)"}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[o.admin_emails.map((s,r)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"email",value:s,onChange:n=>C(r,n.target.value),className:"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"admin@proprio-link.fr"}),o.admin_emails.length>1&&e.jsx("button",{type:"button",onClick:()=>S(r),className:"bg-red-500 text-white px-3 py-2 rounded-md hover:bg-red-600",children:"Supprimer"})]},r)),h.admin_emails&&e.jsx("p",{className:"text-sm text-red-600",children:h.admin_emails}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:E,className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600",children:"Ajouter un email"}),e.jsx("button",{type:"submit",disabled:b,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:b?"Enregistrement...":"Enregistrer les emails"})]})]})]})}),m==="test"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tester la configuration SMTP"}),e.jsxs("form",{onSubmit:w,className:"flex gap-4",children:[e.jsx("input",{type:"email",value:y.test_email,onChange:s=>_("test_email",s.target.value),className:"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"test@exemple.com",required:!0}),e.jsx("button",{type:"submit",disabled:d,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50",children:d?"Envoi...":"Envoyer un test"})]})]})}),e.jsx("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tester les notifications administrateur"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Envoie un email de test à tous les administrateurs configurés"}),e.jsx("button",{onClick:k,disabled:d,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:d?"Envoi...":"Tester les notifications admin"})]})}),a.admin_notification_emails&&a.admin_notification_emails.length>0&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"Emails administrateur configurés:"}),e.jsx("ul",{className:"text-sm text-blue-700",children:a.admin_notification_emails.map((s,r)=>e.jsxs("li",{children:["• ",s]},r))})]})]})]})]})}export{H as default};
