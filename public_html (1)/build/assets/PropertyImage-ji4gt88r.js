import{r as i,j as o}from"./app-iFD7Weej.js";const v=({image:t,alt:a="Property image",className:n="",fallbackClassName:p="",showPlaceholder:g=!0,debug:h=!1})=>{const[s,u]=i.useState(0),[d,f]=i.useState(!1),[m,x]=i.useState([]),w=e=>e?[`/storage/${e}`,`/images/${e}`,`/storage/${e}`,`${window.location.origin}/storage/${e}`].filter(Boolean):[],r=t!=null&&t.chemin_fichier?w(t.chemin_fichier):[],y=()=>{const e=r[s],c={url:e,success:!1,timestamp:new Date().toISOString()};x(l=>[...l,c]),console.warn("üñºÔ∏è Property Image failed to load:",e),console.log("üìä Image info:",{imageId:t==null?void 0:t.id,cheminFichier:t==null?void 0:t.chemin_fichier,attemptNumber:s+1,totalUrls:r.length}),s<r.length-1?u(l=>l+1):(console.error("‚ùå All property image fallbacks failed for:",t),f(!0))},b=()=>{const e=r[s],c={url:e,success:!0,timestamp:new Date().toISOString()};x(l=>[...l,c]),console.log("‚úÖ Property Image loaded successfully:",e),f(!1)},I=`data:image/svg+xml;base64,${btoa(`
        <svg width="400" height="300" xmlns="http://www.w3.org/2000/svg">
            <rect width="400" height="300" fill="#f3f4f6"/>
            <rect x="80" y="75" width="240" height="150" fill="#e5e7eb"/>
            <rect x="100" y="95" width="80" height="60" fill="#d1d5db"/>
            <rect x="220" y="95" width="80" height="60" fill="#d1d5db"/>
            <rect x="100" y="170" width="200" height="40" fill="#d1d5db"/>
            <text x="200" y="250" text-anchor="middle" fill="#6b7280" font-family="Arial" font-size="16">Property Image</text>
        </svg>
    `)}`;return!r.length||d?g?(console.log("üé® Showing placeholder for property image:",{hasImageData:!!t,cheminFichier:t==null?void 0:t.chemin_fichier,imageUrlsLength:r.length,hasError:d,loadAttempts:m}),o.jsxs("div",{className:`bg-gray-200 flex items-center justify-center ${p||n}`,children:[o.jsx("img",{src:I,alt:a,className:n}),h&&o.jsx("div",{className:"absolute top-0 left-0 bg-red-500 text-white text-xs p-1",children:"No Image"})]})):null:o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:r[s],alt:a,className:n,onError:y,onLoad:b,loading:"lazy"}),h&&o.jsxs("div",{className:"absolute top-0 right-0 bg-blue-500 text-white text-xs p-1",children:[s+1,"/",r.length]})]})};export{v as P};
