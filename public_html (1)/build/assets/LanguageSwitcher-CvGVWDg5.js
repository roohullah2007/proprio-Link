import{q as h,r as i,j as s,m as p}from"./app-iFD7Weej.js";function b({currentLocale:n,className:x=""}){const{props:r}=h(),[g,t]=i.useState(!1),[o,l]=i.useState(!1),a=n||r.locale||"fr";i.useEffect(()=>{console.log("LanguageSwitcher - Current locale:",a),console.log("LanguageSwitcher - Props locale:",r.locale),console.log("LanguageSwitcher - Passed locale:",n)},[a,r.locale,n]);const c=[{code:"fr",name:"FranÃ§ais",flag:s.jsx("img",{src:"/france.svg",alt:"French flag",className:"w-[19px] h-[19px] object-cover rounded-sm"})},{code:"en",name:"English",flag:s.jsx("img",{src:"/british.svg",alt:"British flag",className:"w-[19px] h-[19px] object-cover rounded-sm"})}],d=c.find(e=>e.code===a)||c[0],f=e=>{if(o||a===e){console.log("Language change blocked:",{isChanging:o,currentLocale:a,targetLocale:e});return}t(!1),l(!0),console.log("Language change to:",e),p.post(route("language.change"),{language:e},{preserveState:!1,preserveScroll:!1,replace:!1,onStart:()=>{console.log("Language change started:",e)},onSuccess:u=>{console.log("Language changed successfully to:",e),l(!1)},onError:u=>{console.error("Language change failed:",u),l(!1),alert("Failed to change language. Please try again.")},onFinish:()=>{l(!1)}})};return s.jsxs("div",{className:`relative ${x}`,children:[s.jsx("button",{onClick:()=>t(!g),disabled:o,className:`flex items-center justify-center w-[35px] h-[35px] bg-[#F5F7F8] border-[1.5px] border-[#E5E5E5] rounded-full p-2 hover:bg-[#EAEEF0] transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-[#2563EB] focus:ring-opacity-50 ${o?"opacity-50 cursor-not-allowed":""}`,title:`Current language: ${d.name}`,children:s.jsx("div",{className:"w-[19px] h-[19px] flex-none",children:o?s.jsx("div",{className:"w-[19px] h-[19px] border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin"}):d.flag})}),g&&!o&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>t(!1)}),s.jsx("div",{className:"absolute right-0 top-full mt-2 z-20 bg-white border border-gray-200 rounded-lg shadow-lg min-w-[180px] py-1",children:c.map(e=>s.jsxs("button",{onClick:()=>f(e.code),disabled:a===e.code||o,className:`w-full flex items-center gap-3 px-4 py-3 text-sm text-left hover:bg-gray-50 transition-colors duration-150 disabled:cursor-not-allowed ${a===e.code?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-50"}`,children:[s.jsx("div",{className:"w-[19px] h-[19px] flex-none",children:e.flag}),s.jsx("span",{className:"font-medium flex-1",children:e.name}),a===e.code&&s.jsx("div",{className:"flex-none",children:s.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]},e.code))})]})]})}export{b as L};
